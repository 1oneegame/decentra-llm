# Модель персонализированных рекомендаций банковских продуктов

## Описание

Базовая модель для анализа поведения клиентов банка и вычисления ожидаемой выгоды по различным банковским продуктам. Модель анализирует транзакции и переводы клиентов за 3 месяца и рекомендует наиболее выгодный продукт.

## Структура модели

### Основные классы:

1. **ProductBenefit** - dataclass для хранения информации о выгоде продукта
2. **ProductAnalyzer** - класс для расчета выгоды по каждому типу продукта
3. **ClientAnalyzer** - класс для анализа поведения конкретного клиента
4. **PersonalizedRecommendationModel** - основной класс модели

### Поддерживаемые продукты:

1. **Карта для путешествий** - кешбэк 4% на путешествия, отели, такси
2. **Премиальная карта** - базовый кешбэк 2-4% + премиум категории
3. **Кредитная карта** - кешбэк 10% на топ-3 категории + онлайн сервисы
4. **Депозит мультивалютный** - проценты 8% + бонус за валютные операции
5. **Депозит сберегательный** - максимальная ставка 12% (от 1М KZT)
6. **Депозит накопительный** - ставка 10% + бонус за пополнения
7. **Инвестиции** - экономия на комиссиях (от 50К KZT)
8. **Золотые слитки** - защитный актив

## Использование

### Базовое использование:

```python
from model import PersonalizedRecommendationModel

model = PersonalizedRecommendationModel()
result = model.process_client_data('client_1')

print(f"Рекомендуемый продукт: {result['best_product_name']}")
print(f"Ожидаемая выгода: {result['best_benefit']:,.0f} KZT")
```

### Получение рекомендации:

```python
client_code, product_name, benefit = model.get_recommendation('client_1')
```

## Входные данные

Модель ожидает следующие файлы в папке `dataset/`:

- `clients.csv` - профили клиентов
- `client_{id}_transactions_3m.csv` - транзакции клиента
- `client_{id}_transfers_3m.csv` - переводы клиента

## Алгоритм работы

1. **Загрузка данных** - чтение профиля клиента, транзакций и переводов
2. **Анализ трат** - группировка по категориям, расчет сумм
3. **Расчет выгоды** - для каждого продукта вычисляется ожидаемая выгода
4. **Выбор лучшего** - продукт с максимальной выгодой становится рекомендацией
5. **Формирование обоснования** - создание объяснения выбора

## Метрики выгоды

- **Карта для путешествий**: 4% от трат на путешествия + 2% от валютных операций
- **Премиальная карта**: 2-4% от всех трат + 4% от премиум категорий + экономия на комиссиях
- **Кредитная карта**: 10% от топ-3 категорий + 10% от онлайн сервисов
- **Депозиты**: проценты от остатка + бонусы за активность
- **Инвестиции**: экономия на комиссиях от оборота

## Примеры результатов

```
Клиент: Айгерим
Статус: Зарплатный клиент
Остаток: 92,643 KZT
Рекомендуемый продукт: Кредитная карта
Ожидаемая выгода: 192,283 KZT
Обоснование: Кешбэк 10% на топ-3 категории (1,439,458 KZT) + 10% на онлайн сервисы (483,376 KZT)
```

## Запуск демо

```bash
python model.py          # Анализ одного клиента
python demo_model.py     # Анализ нескольких клиентов
```
